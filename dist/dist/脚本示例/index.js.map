{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external var \"z\"","webpack://tavern_helper_template/src/dist/è„šæœ¬ç¤ºä¾‹/index.js?c0a3"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = z;","import{createPinia as e,defineStore as t,storeToRefs as n}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{klona as s}from'https://testingcf.jsdelivr.net/npm/klona/+esm';import{default as o}from'https://testingcf.jsdelivr.net/npm/dedent/+esm';\nimport { z } from 'zod';\nvar r={377(){$(()=>{toastr.success('ä½ å·²ç»æˆåŠŸåŠ è½½ç¤ºä¾‹è„šæœ¬!','æ­å–œä½ !')}),$(window).on('pagehide',()=>{toastr.info('ä½ å·²ç»å¸è½½ç¤ºä¾‹è„šæœ¬!','å†è§!')})},757(){$(()=>{replaceScriptButtons([{name:'æ™šä¸Šå¥½',visible:!0}]),eventOn(getButtonEvent('æ™šä¸Šå¥½'),()=>{toastr.warning('æ™šå®‰, ç»œç»œ')})})},302(){eventOn(tavern_events.MESSAGE_UPDATED,e=>{toastr.error(`è°è®©ä½ åŠ¨æˆ‘ç¬¬ ${e} æ¥¼æ¶ˆæ¯çš„ğŸ˜¡`,'å¹²ä»€ä¹ˆ!')})}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return r[e](n,n.exports,i),n.exports}i(377),i(757),i(302);!function(){let e=SillyTavern.getCurrentChatId();eventOn(tavern_events.CHAT_CHANGED,t=>{e!==t&&(e=t,window.location.reload())})}();const l=Vue,c=z,d=c.z.object({button_selected:c.z.boolean().default(!1)}).prefault({}),p=t('settings',()=>{const e=(0,l.ref)(d.parse(getVariables({type:'script',script_id:getScriptId()})));return(0,l.watchEffect)(()=>{insertOrAssignVariables(s(e.value),{type:'script',script_id:getScriptId()})}),{settings:e}}),m={class:'example-extension-settings'},u={class:'inline-drawer'},v={class:'inline-drawer-content'},g={class:'example-extension_block flex-container'},f=(0,l.defineComponent)({__name:'è®¾ç½®ç•Œé¢',setup(e){const{settings:t}=n(p()),s=()=>{toastr.success('ä½ å¥½å‘€!')};return(e,n)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',m,[(0,l.createElementVNode)('div',u,[n[3]||(n[3]=(0,l.createElementVNode)('div',{class:'inline-drawer-toggle inline-drawer-header'},[(0,l.createElementVNode)('b',null,(0,l.toDisplayString)('è„šæœ¬ç¤ºä¾‹')),(0,l.createElementVNode)('div',{class:'inline-drawer-icon fa-solid fa-circle-chevron-down down'})],-1)),(0,l.createElementVNode)('div',v,[(0,l.createElementVNode)('div',{class:'example-extension_block flex-container'},[(0,l.createElementVNode)('input',{class:'menu_button',type:'submit',value:'ç¤ºä¾‹æŒ‰é’®',onClick:s})]),(0,l.createElementVNode)('div',g,[(0,l.withDirectives)((0,l.createElementVNode)('input',{'onUpdate:modelValue':n[0]||(n[0]=e=>(0,l.unref)(t).button_selected=e),type:'checkbox'},null,512),[[l.vModelCheckbox,(0,l.unref)(t).button_selected]]),n[1]||(n[1]=(0,l.createElementVNode)('label',{for:'example_setting'},(0,l.toDisplayString)('ç¤ºä¾‹å¼€å…³'),-1))]),n[2]||(n[2]=(0,l.createElementVNode)('hr',{class:'sysHR'},null,-1))])])]))}});$(()=>{const t=(0,l.createApp)(f).use(e()),n=$('<div>').attr('script_id',getScriptId()).appendTo('#extensions_settings2');t.mount(n[0]);const{destroy:s}=function(e='head'){const t=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone()).appendTo(e);return{destroy:()=>t.remove()}}();$(window).on('pagehide',()=>{t.unmount(),n.remove(),s()})}),$(async()=>{0===getLastMessageId()&&await createChatMessages([{role:'assistant',message:o('\\n                   [æŸ¥çœ‹æ—¥è®°: è¿™æ˜¯ç¬¬äºŒæ¬¡çœ‹æˆ‘çš„æ—¥è®°äº†å‘¢~]\\n                   <roleplay_options>\\n                   æ¥å—æ—¥è®°æœ¬å¹¶ç¿»é˜…: é’ç©ºé»æ¥è¿‡å¥¹é€’æ¥çš„ç²‰è‰²æ—¥è®°æœ¬ï¼Œåœ¨å¤©å°é˜³å…‰ä¸‹ç¼“ç¼“ç¿»å¼€ç¬¬ä¸€é¡µ\\n                   ä¿æŒæ²‰é»˜ç›¯ç€å¥¹çœ‹: é’ç©ºé»æ²¡æœ‰æ¥æœ¬å­ï¼Œåªæ˜¯ç›¯ç€å¥¹ç•¥æ˜¾ç´§å¼ çš„è¡¨æƒ…å’Œè½»é¢¤çš„å£°éŸ³\\n                   ååˆ°å¥¹èº«è¾¹: é’ç©ºé»æ²¡æœ‰ç«‹åˆ»å›åº”ï¼Œè€Œæ˜¯ç¼“ç¼“èµ°åˆ°ç»œç»œèº«è¾¹åä¸‹ï¼Œç­‰å¾…å¥¹è‡ªå·±ç»§ç»­è¯´\\n                   å¼€ç©ç¬‘åŒ–è§£æ°”æ°›: é’ç©ºé»å¾®å¾®ä¸€ç¬‘ï¼Œå¼€ç©ç¬‘åœ°è¯´ã€Œæ‰€ä»¥ï¼Œæ˜¯è¦è®©æˆ‘å½“ç›‘ç£å®˜å•¦ï¼Ÿã€\\n                   è·³è¿‡æ—¶é—´: é’ç©ºé»æ¥è¿‡æ—¥è®°æœ¬ï¼Œå®‰é™åœ°ç¿»äº†å‡ é¡µï¼Œæ—¶é—´æ‚„ç„¶æµé€è‡³é»„æ˜æ·±å¤„\\n                   å’Œç»œç»œèŠå¤©: é’ç©ºé»è¯•æ¢æ€§åœ°é—®ï¼šã€Œè¿™æœ¬æ˜¯ä»å“ªå¤©å¼€å§‹å†™çš„ï¼Ÿéƒ½å†™äº›ä»€ä¹ˆå‘€ï¼Ÿã€\\n                   </roleplay_options>\\n                 ')},{role:'assistant',message:o('\\n                   [æŸ¥çœ‹æ—¥è®°: çœŸæ˜¯çš„, å°±è¿™ä¹ˆå–œæ¬¢çœ‹å—(vã€ƒÏ‰ã€ƒ)]\\n                   <roleplay_options>\\n                   é˜…è¯»æ—¥è®°ç¬¬ä¸€é¡µï¼šé’ç©ºé»æ‰“å¼€ç²‰è‰²çš„æ—¥è®°æœ¬ï¼Œä»ç¬¬ä¸€é¡µå¼€å§‹è®¤çœŸé˜…è¯»ç»œç»œçš„è®°å½•å†…å®¹ã€‚\\n                   é—®å¥¹å°é¢ä¸Šçš„å…”å­è´´çº¸ï¼šé’ç©ºé»å¥½å¥‡é‚£æšè“è‰²å…”å­è´´çº¸çš„æ¥å†ï¼Œè½¬å¤´å‘ç»œç»œè¯¢é—®ã€‚\\n                   è§‚å¯Ÿç»œç»œçš„å°åŠ¨ä½œï¼šé’ç©ºé»ä¸æ€¥ç€ç¿»å¼€æ—¥è®°ï¼Œè€Œæ˜¯æ³¨æ„åˆ°ç»œç»œè¡¨æƒ…é‡Œä¸€ä¸æœŸå¾…ä¸ä¸å®‰ã€‚\\n                   å’Œå¥¹é—²èŠå¤©æ°”ï¼šé’ç©ºé»éšå£èŠèµ·å‚æ™šé£æœ‰ç‚¹å‡‰ï¼Œè¯•å›¾èˆ’ç¼“ç´§å¼ æ°”æ°›ã€‚\\n                   è°ƒä¾ƒå¥¹ï¼šâ€œæœ‰å“ªé¡µæ˜¯â€˜ä¸è®¸çœ‹â€™çš„ï¼Ÿâ€é’ç©ºé»è½»æ¾åœ°è¯•å›¾åŒ–è§£å¥¹çš„å°æ…Œä¹±ã€‚\\n                   è½¬èº«å›æ•™å®¤ï¼šé’ç©ºé»æ¥è¿‡æ—¥è®°å´å¹¶æœªç«‹åˆ»ç¿»å¼€ï¼Œè€Œæ˜¯è¡¨ç¤ºå›æ•™å®¤å†çœ‹ï¼Œæ‰“ç®—æ…¢æ…¢é˜…è¯»ã€‚\\n                   </roleplay_options>\\n                 ')}],{refresh:'all'})});\n//# sourceMappingURL=index.js.map"],"names":["z","r","$","toastr","success","window","on","info","replaceScriptButtons","name","visible","eventOn","getButtonEvent","warning","tavern_events","MESSAGE_UPDATED","e","error","a","i","t","exports","n","SillyTavern","getCurrentChatId","CHAT_CHANGED","location","reload","l","Vue","c","d","object","button_selected","boolean","default","prefault","p","ref","parse","getVariables","type","script_id","getScriptId","watchEffect","insertOrAssignVariables","value","settings","m","class","u","v","g","f","defineComponent","__name","setup","s","openBlock","createElementBlock","createElementVNode","toDisplayString","onClick","withDirectives","unref","vModelCheckbox","for","createApp","use","attr","appendTo","mount","destroy","append","document","clone","remove","unmount","async","getLastMessageId","createChatMessages","role","message","refresh"],"sourceRoot":""}